name: Update Gradle Wrapper

on:
  schedule:
    - cron: "0 2 * * *"
  push:
    branches:
      - main
    paths:
      - 'gradle/**'
      - 'gradlew'
      - 'gradlew.bat'
      - 'demo/*/*/gradle/**'
      - 'demo/*/*/gradlew'
      - 'demo/*/*/gradlew.bat'
      - .github/workflows/gradle-wrapper-update.yml
  pull_request:
    branches:
      - main
    paths:
      - 'gradle/**'
      - 'gradlew'
      - 'gradlew.bat'
      - 'demo/*/*/gradle/**'
      - 'demo/*/*/gradlew'
      - 'demo/*/*/gradlew.bat'
      - .github/workflows/gradle-wrapper-update.yml
jobs:
  updateWrapperPlugin:
    name: "Update Gradle Wrapper: Plugin"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Update Gradle Wrapper
        uses: gradle-update/update-gradle-wrapper-action@v1
        with:
          path-exclude: demo/**
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          set-distribution-checksum: true
  updateWrapperJavaKotlinSample:
    name: "Update Gradle Wrapper: Java Kotlin DSL Sample"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Update Gradle Wrapper
        uses: gradle-update/update-gradle-wrapper-action@v1
        with:
          path: demo/java/kotlin
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          set-distribution-checksum: true
  validationJavaModelPublishSample:
    name: "Update Gradle Wrapper: Java Kotlin DSL Sample"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Update Gradle Wrapper
        uses: gradle-update/update-gradle-wrapper-action@v1
        with:
          path: demo/java/model-publish
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          set-distribution-checksum: true
  updateWrapperJavaGroovySample:
    name: "Update Gradle Wrapper: Java Groovy DSL Sample"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Update Gradle Wrapper
        uses: gradle-update/update-gradle-wrapper-action@v1
        with:
          path: demo/java/groovy
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          set-distribution-checksum: true
  updateWrapperAndroidAgp7Sample:
    name: "Update Gradle Wrapper: Android AGP 7 Sample"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Update Gradle Wrapper
        uses: gradle-update/update-gradle-wrapper-action@v1
        with:
          path: demo/android/agp7
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          set-distribution-checksum: true
  updateWrapperAndroidAgp4Sample:
    name: "Update Gradle Wrapper: Android AGP 4 Sample"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Update Gradle Wrapper
        uses: gradle-update/update-gradle-wrapper-action@v1
        with:
          path: demo/android/agp4
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          set-distribution-checksum: true
